{% extends "base.html" %}
{% block title %}API Playground - Serpscraper{% endblock %}
{% block content %}
<div class="bg-[#f7f9fa] min-h-screen flex flex-col items-center py-12 font-sans">
  <div class="w-full max-w-screen-2xl mx-auto">
    <div class="mb-10 px-4 md:px-0">
      <div class="bg-blue-50 border border-blue-200 text-blue-900 px-12 py-6 rounded-xl flex items-center gap-2 text-lg shadow font-sans">
        <span class="font-bold text-blue-600 text-xl">API Playground</span>
        <span class="ml-4">Test ValueSERP's <span class="font-semibold text-blue-700">real-time API</span>. Enter your query and settings on the left, submit, and see live Google results (HTML, pretty JSON preview, or CSV) on the right. <span class="text-blue-700 font-semibold">No credits are charged for playground usage.</span></span>
      </div>
    </div>
    <div class="w-full grid grid-cols-1 xl:grid-cols-2 gap-16">
      <!-- Input Form -->
      <form method="post" class="bg-white rounded-2xl shadow-xl p-16 flex flex-col gap-6 text-lg w-full min-h-[900px] max-w-[900px] mx-auto">
        <div>
          <label class="block font-semibold mb-1 text-base">Search Type</label>
          <select name="search_type" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
            <option value="search">Google Web Search</option>
            <option value="news">Google News</option>
            <option value="images">Google Images</option>
            <option value="videos">Google Videos</option>
            <option value="places">Places</option>
            <option value="shopping">Shopping</option>
          </select>
        </div>
        <div>
          <label class="block font-semibold mb-1 text-base">Search Query</label>
          <input name="q" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400" placeholder="e.g. buy engagement ring" required>
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">AI Overview</label>
            <select name="include_ai_overview" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Include Ads</label>
            <select name="include_ads" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </div>
        </div>
        <div>
          <label class="block font-semibold mb-1 text-base">Location</label>
          <input name="location" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400" placeholder="e.g. Toronto, Ontario, Canada">
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Google Domain</label>
            <select name="google_domain" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="google.com">google.com</option>
              <option value="google.ca">google.ca</option>
              <option value="google.co.uk">google.co.uk</option>
            </select>
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Country (gl)</label>
            <select name="gl" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="us">United States</option>
              <option value="ca">Canada</option>
              <option value="uk">United Kingdom</option>
            </select>
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Language (hl)</label>
            <select name="hl" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="en">English</option>
              <option value="fr">French</option>
              <option value="es">Spanish</option>
            </select>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Device</label>
            <select name="device" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="desktop">Desktop</option>
              <option value="mobile">Mobile</option>
              <option value="tablet">Tablet</option>
            </select>
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Answer Box</label>
            <select name="include_answer_box" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="">Default</option>
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Flatten Results</label>
            <select name="flatten_results" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="">Default</option>
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Page</label>
            <input name="page" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400" placeholder="1">
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Num Results</label>
            <input name="num" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400" placeholder="10">
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Max Page</label>
            <input name="max_page" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400" placeholder="2">
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Output</label>
            <select name="output" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="html">HTML</option>
              <option value="json">JSON</option>
              <option value="csv">CSV</option>
            </select>
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1 text-base">Include Raw HTML</label>
            <select name="include_raw_html" class="w-full border rounded p-3 text-lg focus:ring-2 focus:ring-orange-400">
              <option value="">Default</option>
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </div>
          <div class="flex-1"></div>
        </div>
        <div class="flex justify-center mt-6">
          <button type="submit" class="bg-orange-600 hover:bg-orange-700 text-gray-900 font-bold px-10 py-4 rounded-lg shadow transition text-xl">
            Send API Request
          </button>
        </div>
      </form>
      <!-- Output Panel -->
      <div class="bg-white rounded-2xl shadow-xl px-12 py-10 flex flex-col text-lg w-full max-w-3xl mx-auto min-h-[700px]">
        <div class="font-semibold text-gray-700 text-2xl mb-6">Output</div>
        <div class="flex-1">
          {% if error %}
            <div class="bg-red-100 text-red-700 p-4 rounded">{{ error }}</div>
          {% elif output_type == 'html' and result_html %}
            <iframe srcdoc="{{ result_htmle }}" style="width:100%;height:600px;border:none;"></iframe>
          {% elif output_type == 'json' and result_json %}
            {{ render_serp(result_json) }}
          {% elif output_type == 'csv' and result_csv %}
            <pre class="bg-gray-900 text-yellow-200 text-xs rounded p-4 overflow-x-auto">{{ result_csv }}</pre>
          {% else %}
            <div class="text-gray-400 text-center py-20 text-lg">No output yet. Submit a request above.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
